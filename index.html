<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <title>Solar System App</title>
        <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
        
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
                
        <link rel="stylesheet" href="styles.css">

        <!-- 3D stuff -->
        <script type="importmap">
            {
                "imports": {
                    "three": "https://unpkg.com/three@0.146.0/build/three.module.js",
                    "OrbitControls": "https://unpkg.com/three@0.146.0/examples/jsm/controls/OrbitControls.js"
                }
            }
        </script>
        <link rel="stylesheet" href="css/main.css">

        <script type="x-shader/x-fragment" id="sky-frag">
            varying vec2 vUv;
            float d, rate;
            uniform float rand1;
            uniform sampler2D texture;
            void main() {
                gl_FragColor = texture2D(texture, vUv);
            
                rate = mod(vUv.x / 20.0 + vUv.y / 20.0, 5.0);
                d = 10.0 + 8.0 * sin(rate * (rand1 + vUv.x + vUv.y));
                gl_FragColor.r = clamp(1.0 - 1.5 / (1.0 + exp(d * (gl_FragColor.r - 0.5))), 0.0, 1.0);
                gl_FragColor.g = clamp(1.0 - 1.5 / (1.0 + exp(d * (gl_FragColor.g - 0.5))), 0.0, 1.0);
                gl_FragColor.b = clamp(1.0 - 1.5 / (1.0 + exp(d * (gl_FragColor.b - 0.5))), 0.0, 1.0);
            }
        </script>

        <script type="x-shader/x-fragment" id="sky-vert">
            varying vec2 vUv;
            void main() {
                vUv = uv;
                gl_PointSize = 8.0;
                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
        </script>
    </head>
    <body>
        <div class="container pt-0">
            <h1 class="title text-light p-2 text-center mb-0">Solar System App</h1>
            <h3 class="text-light h4 text-center bt-0">Click to view a random celestial body in the solar system</h3>

            <div class="btn-group centered-buttons">
                <button class="btn-lg d-block" onclick="getRandomBody()">Any Body</button>
                <button class="btn-lg d-block" onclick="getRandomPlanet()">Planet</button>
                <button class="btn-lg d-block" onclick="getRandomMoon()">Moon</button>
                <button class="btn-lg d-block" onclick="getRandomDwarf()">Dwarf Planet</button>
                <button class="btn-lg d-block" onclick="getRandomAsteroid()">Asteroid</button>
                <button class="btn-lg d-block" onclick="getRandomComet()">Comet</button>
                <button class="btn-lg d-block" onclick="getSun()">Sun</button>
            </div>

            <div class="line"></div>
            <div >
                <label for="city" class="form-label text-light mt-0">Search for a celestial body in our solar system:</label>
                <form class="form-inline" id="addForm" name="addForm" action="#" method="post" onsubmit="return searchBody();">
                    <div class="d-flex">
                        <input autocomplete="off"
                            type="text" placeholder="e.g. Jupiter" class="input_text form-control" id="searchBar">
                        <button id="submit">Search</button>
                    </div>
                </form>
            </div>
            <br>

            <div class="row">
                <div class="col-8" id="canvas-container">
                    <canvas id="myCanvas" width="860px" height="500px"></canvas>
                </div>
                <div class="col-4 planet-info-box">
                    <p class="d-inline text-danger" id="name"></p>
                    <p class="d-inline text-white" id="bodyType"></p>     
                    <p class="d-inline text-white" id="discover"></p>
                    <br><br>
                    <p class="d-inline text-white" id="mass"></p>
                    <p class="d-inline text-white" id="radius"></p>
                    <p class="d-inline text-primary" id="volumeComparison"></p>

                    <div class="card mt-3 border-light" id="img_box">
                        <img class="card-img" src="" alt="Card image">
                    </div>
                </div>
            </div>

            <div class="btn-group d-flex">
                <button class="btn-lg d-block" onclick="switchToSky()">Sky View</button>
                <button class="btn-lg d-block" onclick="switchToSize()">Size Comparison</button>
            </div>
            <small class="text-secondary mt-3 d-block">The sky view is rendered if the celestial object were to be at the same distance from earth as our moon and is
                accurately sized to what you would see in the night sky.
            </small>
        </div>
        <br>

        <script src="planet.js"></script>
        <script src="js/draw.js" type="module"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    </body>
</html>